<template>
  <span class="icon-img-wrapper">
    <i :class="['easychat-iconfont', isSp ? 'icon-img' : '', webfont, computedSize]" :style="computedStyle"></i>
  </span>
</template>
<script>
// 特殊
const SP_MAP = {
  'loading-spining': 'loading-spining',
};

export default {
  name: 'Icon',
  props: {
    type: {
      type: String,
      default: '',
    },
    size: {
      type: [String, Number],
      default: 'normal',
    },
  },
  computed: {
    isSp () {
      if (SP_MAP[this.type]) {
        return true;
      }
      return false;
    },
    webfont () {
      if (this.isSp) {
        return SP_MAP[this.type];
      }
      return `iconfont-${this.type}`;
    },
    computedSize () {
      if (this.isSp) {
        return `icon-sp-${this.size}-size`
      }

      if (typeof this.size === 'number') {
        return ''
      }

      return `icon-${this.size}-size`;
    },
    computedStyle () {
      console.log('进来了', this.size);
      if (typeof this.size === 'number') {
        return {
          fontSize: `${this.size}px`,
        }
      }
      return {}
    },
  },
};
</script>
<style scoped lang="scss">
.icon-img-wrapper {
  line-height: 1;
  vertical-align: text-top;
  .icon-img {
    vertical-align: middle;
    display: inline-block;
  }

  .icon-small-size {
    font-size: 20px;
  }

  .icon-large-size {
    font-size: 60px;
  }

  .icon-mini-size {
    font-size: 16px;
  }

  .icon-sp-small-size {
    height: 20px;
    width: 20px;
  }

  .icon-sp-large-size {
    height: 60px;
    width: 60px;
  }

  .icon-sp-mini-size {
    height: 16px;
    width: 16px;
  }
  
}

.loading-spining {
  -webkit-animation: loadingSpining 1s steps(12, end) infinite;
  animation: loadingSpining 1s steps(12, end) infinite;
  background: transparent
    url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgxMDB2MTAwSDB6Ii8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTlFOUU5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTMwKSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iIzk4OTY5NyIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgzMCAxMDUuOTggNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjOUI5OTlBIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDYwIDc1Ljk4IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0EzQTFBMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA2NSA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNBQkE5QUEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoMTIwIDU4LjY2IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0IyQjJCMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgxNTAgNTQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjQkFCOEI5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA1MCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDMkMwQzEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTE1MCA0NS45OCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDQkNCQ0IiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTEyMCA0MS4zNCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNEMkQyRDIiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDM1IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0RBREFEQSIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgtNjAgMjQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTJFMkUyIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKC0zMCAtNS45OCA2NSkiLz48L3N2Zz4=')
    no-repeat;
  background-size: 100%;
}

@keyframes loadingSpining {
  from {
    transform: rotate(-360deg);
  }
  to {
    transform: rotate(0);
  }
}
</style>
